var gTxtMsg,images={},noAudio=0,preload,twTextMsg={GameMode:"\u904a\u6232\u6a21\u5f0f",DemoMode:"\u793a\u7bc4\u6a21\u5f0f",EditMode:"\u7de8\u8f2f\u6a21\u5f0f",EditModeMsg:"\u81ea\u5efa\u95dc\u5361, \u4f9b\u904a\u6232\u6a21\u5f0f\u4f7f\u7528.",BestScore:"\u6700\u4f73\u6210\u7e3e: ",Step:"\u6b65",Steps:"\u6b65",Hints:"\u63d0\u793a",OptimalSolution:"\u6700\u5c11\u6b65\u6578: ",Source:"\u4f86\u6e90: ",Level:"\u7b2c%l\u95dc",LevelOfUrl:"%u \u7684 %l",AliasName:"\u5225\u540d: ",Creator:"\u63d0\u4f9b\u8005: ",
userCreator:"\u4f7f\u7528\u8005\u81ea\u5b9a",Good:"\u6aa2\u6e2cOK",Exist:"\u6b64\u95dc\u5df2\u5b58\u5728",Flip:"\u5de6\u53f3\u76f8\u53cd",SameAs:"\u8207 '%s' \u76f8\u540c.",Error:"\u932f\u8aa4",NoSolution:"\u7121\u89e3 !",ZeroStep:"\u4e0d\u9700\u8981\u79fb\u52d5 !",TooManyItem:"\u81ea\u5b9a\u95dc\u592a\u591a",RemoveSome:"\u8acb\u79fb\u9664\u4e00\u4e9b\u81ea\u5b9a\u95dc\uff0c\u624d\u80fd\u52a0\u5165\u65b0\u95dc\uff01",SaveSuccess:"\u5132\u5b58\u5b8c\u6210",NewLevel:"\u65b0\u81ea\u5b9a\u95dc: ",PlayItNow:"\u73fe\u5728\u8981\u73a9\u6b64\u95dc\u55ce ?",
Classic:"  \u7d93\u5178",User:"  \u81ea\u5b9a",UserLevel:"\u81ea\u5b9a-"},enTextMsg={GameMode:"GAME Mode",DemoMode:"DEMO Mode",EditMode:"EDIT Mode",EditModeMsg:"Create your own level for GAME Mode to play it.",BestScore:"Best Score: ",Step:"move",Steps:"moves",Hints:"hints",OptimalSolution:"Optimal Solution: ",Source:"Source: ",Level:"level %l",LevelOfUrl:"%l of %u",AliasName:"Alias: ",Creator:"Creator: ",userCreator:"user",Good:"Good",Exist:"Already Exist",Flip:"flip",SameAs:"Same as '%s' .",Error:"Error",
NoSolution:"No Solution !",ZeroStep:"Don't need to move !",TooManyItem:"Too Many Items",RemoveSome:"Please remove some items for add new one !",SaveSuccess:"Save Succesful",NewLevel:"New Level: ",PlayItNow:"Do you want to play it now ?",Classic:"Classic",User:"  User",UserLevel:"User-"},audioSource={title:"audio/title",woodHit:"audio/woodhit",happyPass:"audio/pass",stamp:"audio/stamp",good:"audio/good",exist:"audio/exist",error:"audio/error",success:"audio/success"},imageSource={title:"image/klotski.png",
board:"image/board1.jpg",block1:"image/block1.jpg",block2:"image/block2.jpg",block3:"image/block3.jpg",block4:"image/block4.jpg",select0:"image/select0.png",select1:"image/select1.png",info0:"image/info0.png",info1:"image/info1.png",volume0:"image/volume00.png",volume1:"image/volume01.png",edit:"image/edit.png",game:"image/game.png",replayLevel:"image/return.png",nextLevel:"image/nextLevel.png",highScore:"image/bestScore00.png",reset0:"image/reset00.png",reset1:"image/reset11.png",undo0:"image/undo00.png",
undo1:"image/undo11.png",redo0:"image/redo00.png",redo1:"image/redo11.png",hints0:"image/hints00.png",hints1:"image/hints11.png",first0:"image/first00.png",first1:"image/first01.png",back0:"image/backward00.png",back1:"image/backward01.png",play0:"image/play00.png",play1:"image/play01.png",play2:"image/play02.png",next0:"image/forward00.png",next1:"image/forward01.png",last0:"image/last00.png",last1:"image/last01.png",test0:"image/test00.png",test1:"image/test01.png",save0:"image/save00.png",save1:"image/save01.png",
demoMode0:"image/demoMode00.png",demoMode1:"image/demoMode01.png",gameMode0:"image/gameMode00.png",gameMode1:"image/gameMode01.png",yes:"image/yes.png",no:"image/no.png",ok:"image/yes.png"};
function setTxtMsg(){0<=getSystemLanguage().indexOf("zh-")?(gTxtMsg=twTextMsg,imageSource.demoMode0="image/demoMode10.png",imageSource.demoMode1="image/demoMode11.png",imageSource.gameMode0="image/gameMode10.png",imageSource.gameMode1="image/gameMode11.png",imageSource.save0="image/save10.png",imageSource.save1="image/save11.png",imageSource.highScore="image/bestScore01.png"):gTxtMsg=enTextMsg}
function getSystemLanguage(){return(window.navigator.userLanguage||window.navigator.language).toLowerCase()}function loadResource(a){setTxtMsg();audioPreload(a)}audioSource=[{id:"startup",src:"audio/title.ogg"},{id:"woodHit",src:"audio/woodhit.ogg"},{id:"happyPass",src:"audio/pass.ogg"},{id:"stamp",src:"audio/stamp.ogg"},{id:"good",src:"audio/good.ogg"},{id:"exist",src:"audio/exist.ogg"},{id:"error",src:"audio/error.ogg"},{id:"success",src:"audio/success.ogg"}];
function audioPreload(a){preload=new createjs.LoadQueue(!0);createjs.Sound.alternateExtensions=["mp3"];preload.installPlugin(createjs.Sound);preload.on("error",function(a){console.log("error",a)});preload.on("complete",function(c){imagePreload(a)});preload.loadManifest(audioSource)}
function imagePreload(a){var c=0,d=0,b;for(b in imageSource)d++;debug("image totalFiles = "+d);for(b in imageSource)images[b]=new Image,images[b].onload=function(){debug("image loadedFiles = "+(c+1));++c>=d&&null!=a&&a()},images[b].src=imageSource[b]}function soundPlay(a){if(volumeState)return createjs.Sound.play(a)}function audioPlayStartup(){soundPlay("startup")}function audioPlayWoodHit(){soundPlay("woodHit")}function audioPlayHappyPass(){soundPlay("happyPass")}
function audioPlayGood(){soundPlay("good")}function audioPlayExist(){soundPlay("exist")}function audioPlayError(){soundPlay("error")}function audioPlaySuccess(){soundPlay("success")}function audioPlayStamp(){soundPlay("stamp")};
