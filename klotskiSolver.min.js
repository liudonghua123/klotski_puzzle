var $jscomp={scope:{},findInternal:function(a,g,f){a instanceof String&&(a=String(a));for(var l=a.length,m=0;m<l;m++){var r=a[m];if(g.call(f,r,m,a))return{i:m,v:r}}return{i:-1,v:void 0}}};$jscomp.defineProperty="function"==typeof Object.defineProperties?Object.defineProperty:function(a,g,f){if(f.get||f.set)throw new TypeError("ES3 does not support getters and setters.");a!=Array.prototype&&a!=Object.prototype&&(a[g]=f.value)};
$jscomp.getGlobal=function(a){return"undefined"!=typeof window&&window===a?a:"undefined"!=typeof global?global:a};$jscomp.global=$jscomp.getGlobal(this);$jscomp.polyfill=function(a,g,f,l){if(g){f=$jscomp.global;a=a.split(".");for(l=0;l<a.length-1;l++){var m=a[l];m in f||(f[m]={});f=f[m]}a=a[a.length-1];l=f[a];g=g(l);g!=l&&null!=g&&$jscomp.defineProperty(f,a,{configurable:!0,writable:!0,value:g})}};
$jscomp.polyfill("Array.prototype.find",function(a){return a?a:function(a,f){return $jscomp.findInternal(this,a,f).v}},"es6-impl","es3");
function klotskiSolution(){function a(a,c){var b;return null==q.put(a.key,c)?(b=gBoard2Key(a.board,1),q.put(b,c),t.add({board:a.board.slice(0),key:a.key}),1):0}function g(a,c,b,d,f){var n=-1;do n++,c+=d;while(0<=c&&c<G_BOARD_X&&a[c+b*G_BOARD_X]==f);return n}function f(a,c,b,d,f){var n=-1;do n++,b+=d;while(0<=b&&b<G_BOARD_Y&&a[c+b*G_BOARD_X]==f);return n}function l(f,c,b,d,l,n){var e,k,x,y,u=f.board;e=d+l;if(0>e||e>=G_BOARD_Y||(k=u[b+e*G_BOARD_X])<=G_EMPTY_BLOCK)return 0;x=gBlockStyle[gBlockBelongTo[k]][0];
y=gBlockStyle[gBlockBelongTo[k]][1];e=b-g(u,b,e,-1,k);x=e+x-1;var v=0,r=0,p,h,C;do{var q=b-g(u,b,d,-1,G_EMPTY_BLOCK),t=b+g(u,b,d,1,G_EMPTY_BLOCK);if(e<q||x>t)break;r||(p=u.slice(0),C=f.key,r=1);for(h=e;h<=x;h++)p[h+d*G_BOARD_X]=k,p[h+(d+y*l)*G_BOARD_X]=G_EMPTY_BLOCK;h={board:p,key:gBoard2Key(p)};0!=c?v+=a(h,c):(v+=a(h,C),c=C);z==w.RIGHT_ANGLE_TURN&&n<B&&(q<e&&e==b&&(v+=m(h,c,b-1,d,1,n+1)),t>x&&x==b&&(v+=m(h,c,b+1,d,-1,n+1)));d-=l}while(z!=w.ONE_CELL_ONLY&&0<=d&&d<G_BOARD_Y&&p[b+d*G_BOARD_X]==G_EMPTY_BLOCK);
return v}function m(g,c,b,d,m,n){var e,k,x,y,u=g.board;e=b+m;if(0>e||e>=G_BOARD_X||(k=u[e+d*G_BOARD_X])<=G_EMPTY_BLOCK)return 0;x=gBlockStyle[gBlockBelongTo[k]][0];y=gBlockStyle[gBlockBelongTo[k]][1];e=d-f(u,e,d,-1,k);y=e+y-1;var v=0,r=0,p,h,q;do{var t=d-f(u,b,d,-1,G_EMPTY_BLOCK),A=d+f(u,b,d,1,G_EMPTY_BLOCK);if(e<t||y>A)break;r||(p=u.slice(0),q=g.key,r=1);for(h=e;h<=y;h++)p[b+h*G_BOARD_X]=k,p[b+x*m+h*G_BOARD_X]=G_EMPTY_BLOCK;h={board:p,key:gBoard2Key(p)};0!=c?v+=a(h,c):(v+=a(h,q),c=q);z==w.RIGHT_ANGLE_TURN&&
n<B&&(t<e&&e==d&&(v+=l(h,c,b,d-1,1,n+1)),A>y&&y==d&&(v+=l(h,c,b,d+1,-1,n+1)));b-=m}while(z!=w.ONE_CELL_ONLY&&0<=b&&b<G_BOARD_X&&p[b+d*G_BOARD_X]==G_EMPTY_BLOCK);return v}function r(a,c){var b=q.get(a);b.value&&r(b.value,c);c.push(a)}var w={RIGHT_ANGLE_TURN:1,STRAIGHT:2,ONE_CELL_ONLY:3},z=w.RIGHT_ANGLE_TURN,t,q,D,A,B,E;this.init=function(a,c){var b=gBlockCheck(a);if(b.rc)E=1;else{B=b.emptyCount;E=0;if("undefined"!=typeof c)switch(c){case w.ONE_CELL_ONLY:z=w.ONE_CELL_ONLY;break;case w.STRAIGHT:z=w.STRAIGHT;
break;default:case w.RIGHT_ANGLE_TURN:z=w.RIGHT_ANGLE_TURN}t=new queue;q=new hashMap;D=gEasyBoard(a)}};this.find=function(){var f,c,b=null;if(E)return{exploreCount:0,elapsedTime:0,boardList:null};f=new Date;a({board:D,key:gBoard2Key(D)},0);for(A=1;0<t.size();){var d=t.remove();a:{for(c=0;c<gGoalPos.length;c++)if(d.board[gGoalPos[c][0]+gGoalPos[c][1]*G_BOARD_X]!=G_GOAL_BLOCK){c=!1;break a}c=!0}if(c){b=[];r(d.key,b);break}c=A;var g=0,n=0,e=0;a:for(;e<G_BOARD_X;e++)for(var k=0;k<G_BOARD_Y;k++)if(d.board[e+
k*G_BOARD_X]==G_EMPTY_BLOCK&&(n++,g+=l(d,0,e,k,-1,0),g+=l(d,0,e,k,1,0),g+=m(d,0,e,k,-1,0),g+=m(d,0,e,k,1,0),n>=B))break a;A=c+g}c=new Date;delete t;delete q;return{exploreCount:A,elapsedTime:(c-f)/1E3,boardList:b}}};
