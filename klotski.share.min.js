var G_BOARD_X=4,G_BOARD_Y=5,G_BOARD_SIZE=G_BOARD_X*G_BOARD_Y,G_VOID_CHAR="?",G_EMPTY_CHAR="@",G_EMPTY_BLOCK=1,G_GOAL_BLOCK=2,G_GOAL_STYLE=4,gBlockBelongTo=[-1,0,4,2,2,2,2,2,2,3,3,3,3,3,3,1,1,1,1,1,1,1,1,1,1,1,1,1,1],gBlockStyle=[[1,1],[1,1],[2,1],[1,2],[2,2]],gGoalPos=[[1,4],[2,4]],gBlockStartStyle=["@","N","B","H","A"];function gEasyBoard(a){a=a.split("");for(var b=0;b<a.length;b++)a[b]=a[b].charCodeAt(0)-G_VOID_CHAR.charCodeAt(0);return a}
function gBoard2Key(a,b){b=void 0===b?0:b;var d=0,f=-1,e=0;b&&(e=-(G_BOARD_X+1));for(var c=0;c<a.length;c++)c%G_BOARD_X||(e+=2*G_BOARD_X),(blockValue=a[b?e-c:c])==G_GOAL_BLOCK?0>f&&(f=c):d=(d<<2)+gBlockBelongTo[blockValue];return 16*d+f}function gRowMajorToIndex(a,b){return a+G_BOARD_X*b}
function gBlockCheck(a){a=a.split("");var b=[],d=0,f=0;if(a.length!=G_BOARD_SIZE)return console.log("Wrong board size !"),{rc:1};var e,c,m,n,g=0;a:for(;g<G_BOARD_Y;g++)for(var h=0;h<G_BOARD_X;h++)if("0"!=(e=a[gRowMajorToIndex(h,g)])){c=e.charCodeAt(0)-G_VOID_CHAR.charCodeAt(0);m=gBlockStyle[gBlockBelongTo[c]][0];n=gBlockStyle[gBlockBelongTo[c]][1];for(var k=0;k<n;k++){if(k+g>=G_BOARD_Y){d=1;break a}for(var l=0;l<m;l++){if(l+h>=G_BOARD_X){d=1;break a}var p=gRowMajorToIndex(l+h,k+g);if(a[p]!=e){d=1;
break a}a[p]="0"}}if(e==G_EMPTY_CHAR)++f;else if("undefined"!=typeof b[c]){d=2;break a}b[c]=1}1==d&&console.log("Error: wrong block at ["+h+","+g+"]");2==d&&console.log("Error: block duplicate at ["+h+","+g+"]");2<f&&console.log("Warning: too many empty block!");return{rc:d,emptyCount:f}};
